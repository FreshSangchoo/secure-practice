<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>S3 정적 호스팅 & 프론트엔드 이전 - AWS 기초 강의</title>
  <link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" rel="stylesheet">
  <link rel="stylesheet" href="../assets/css/style.css">
</head>
<body>

<header class="site-header">
  <div class="header-inner">
    <a href="../index.html" class="header-logo">
      <span class="aws-icon">AWS</span>
      <span>기초 강의</span>
    </a>
  </div>
</header>

<div class="page-layout">
  <nav class="sidebar">
    <ul class="sidebar-nav">
      <li><a href="#why-not-ec2">프론트엔드를 EC2에 두면?</a></li>
      <li><a href="#s3-hosting">S3 정적 웹사이트 호스팅</a></li>
      <li><a href="#bucket-policy">버킷 정책 (퍼블릭 읽기)</a></li>
      <li><a href="#lab">실습</a></li>
    </ul>
  </nav>

  <main class="main-content">
    <div class="chapter-header">
      <span class="chapter-num">Chapter 18</span>
      <h1>S3 정적 호스팅 & 프론트엔드 이전</h1>
      <div class="objectives">
        <h3>학습 목표</h3>
        <ul>
          <li>프론트엔드를 EC2에서 호스팅하는 것의 비효율성을 이해한다</li>
          <li>S3 정적 웹사이트 호스팅을 설정할 수 있다</li>
          <li>React 빌드 파일을 S3에 배포한다</li>
          <li>S3 웹사이트 URL로 ShopEasy에 접속한다</li>
        </ul>
      </div>
    </div>

    <!-- Section 1: 프론트엔드를 EC2에 두면? -->
    <section class="content-section" id="why-not-ec2">
      <h2>프론트엔드를 EC2에 두면?</h2>

      <p>현재 ShopEasy 프론트엔드는 EC2 인스턴스에서 Nginx를 통해 서비스되고 있습니다. 하지만 React로 빌드된 프론트엔드는 <strong>정적 파일</strong>(HTML, CSS, JavaScript)입니다. 이런 정적 파일을 위해 EC2를 운영하는 것은 낭비입니다.</p>

      <div class="info-box analogy">
        <div class="info-box-title">비유로 이해하기: 전단지 배포에 트럭을 쓰는 격</div>
        <p>EC2에 프론트엔드를 호스팅하는 것은, <strong>전단지 몇 장 나눠주려고 대형 트럭을 빌리는 것</strong>과 같습니다. 전단지(정적 파일)는 가벼운데 트럭(EC2 서버) 임대료를 계속 내야 하죠. 반면 S3는 <strong>우편함</strong>과 같습니다. 전단지를 넣어두면 누구나 와서 가져갈 수 있고, 우편함 유지비는 거의 없습니다.</p>
      </div>

      <h3>EC2 vs S3 호스팅 비교</h3>
      <table>
        <thead>
          <tr><th>항목</th><th>EC2 호스팅</th><th>S3 정적 호스팅</th></tr>
        </thead>
        <tbody>
          <tr><td><strong>비용</strong></td><td>t2.micro ~$8.5/월 (프리티어 후)</td><td>거의 무료 (~$0.01/월)</td></tr>
          <tr><td><strong>관리</strong></td><td>OS 업데이트, Nginx 관리 필요</td><td>관리할 서버 없음</td></tr>
          <tr><td><strong>확장</strong></td><td>트래픽 증가 시 서버 증설</td><td>자동 확장 (무제한)</td></tr>
          <tr><td><strong>가용성</strong></td><td>서버 장애 시 중단</td><td>99.99% 가용성</td></tr>
          <tr><td><strong>배포</strong></td><td>SSH 접속, 파일 복사, Nginx 재시작</td><td><code>aws s3 sync</code> 한 줄</td></tr>
          <tr><td><strong>HTTPS</strong></td><td>직접 인증서 설정</td><td>CloudFront 연동으로 간편</td></tr>
        </tbody>
      </table>

      <div class="info-box concept">
        <div class="info-box-title">정적 파일 vs 동적 처리</div>
        <p><strong>정적 파일</strong>: HTML, CSS, JS, 이미지 등 서버에서 별도의 처리 없이 그대로 전달하면 되는 파일. React 빌드 결과물이 이에 해당합니다.<br>
        <strong>동적 처리</strong>: API 요청을 받아 데이터베이스 조회, 비즈니스 로직 실행 등 서버에서 처리가 필요한 것. Node.js API 서버가 이에 해당합니다.<br><br>
        정적 파일은 서버가 필요 없으므로 S3에서 직접 서비스하는 것이 훨씬 효율적입니다!</p>
      </div>

      <div class="diagram">
        <div class="diagram-title">프론트엔드 호스팅 비교</div>
        <div style="display:flex; gap:2rem; flex-wrap:wrap;">
          <div style="flex:1; min-width:200px;">
            <div style="text-align:center; font-weight:700; padding:0.5rem; color:var(--text-secondary);">현재: EC2 호스팅</div>
            <div class="diagram-row">
              <div class="diagram-box user"><div class="box-title">사용자</div></div>
              <div class="diagram-arrow">→</div>
              <div class="diagram-box compute"><div class="box-title">프론트엔드 EC2</div><div class="box-sub">Nginx</div></div>
            </div>
            <div style="text-align:center; padding:0.3rem; color:var(--text-secondary); font-size:0.85rem;">비용 발생, 서버 관리 필요</div>
          </div>
          <div style="flex:1; min-width:200px;">
            <div style="text-align:center; font-weight:700; padding:0.5rem; color:var(--primary);">목표: S3 호스팅</div>
            <div class="diagram-row">
              <div class="diagram-box user"><div class="box-title">사용자</div></div>
              <div class="diagram-arrow">→</div>
              <div class="diagram-box storage"><div class="box-title">S3 정적 웹사이트</div><div class="box-sub">정적 파일 응답</div></div>
            </div>
            <div style="text-align:center; padding:0.3rem; color:var(--text-secondary); font-size:0.85rem;">거의 무료, 관리 불필요</div>
          </div>
        </div>
      </div>
    </section>

    <!-- Section 2: S3 정적 웹사이트 호스팅 -->
    <section class="content-section" id="s3-hosting">
      <h2>S3 정적 웹사이트 호스팅이란?</h2>

      <p>S3 버킷을 <strong>웹 서버처럼</strong> 사용하는 기능입니다. 버킷에 HTML 파일을 넣고 정적 웹사이트 호스팅을 활성화하면, 웹 브라우저에서 바로 접속할 수 있습니다.</p>

      <div class="info-box analogy">
        <div class="info-box-title">비유로 이해하기: 자동 판매기</div>
        <p>S3 정적 호스팅은 <strong>자동 판매기</strong>와 같습니다. 음료(HTML/CSS/JS 파일)를 넣어두면 고객(사용자)이 버튼(URL)을 누를 때마다 자동으로 음료가 나옵니다. 점원(서버)이 필요 없죠. 음료가 떨어지면 새로 채우기만(파일 업로드) 하면 됩니다.</p>
      </div>

      <h3>S3 웹사이트 URL 형식</h3>
      <div class="code-block">
        <div class="code-header"><span class="lang">text</span><button class="copy-btn">복사</button></div>
        <pre><code># S3 정적 웹사이트 URL 형식
http://[버킷이름].s3-website.[리전].amazonaws.com

# 예시
http://shopeasy-frontend-hong.s3-website.ap-northeast-2.amazonaws.com</code></pre>
      </div>

      <div class="info-box warning">
        <div class="info-box-title">S3 웹사이트 호스팅은 HTTP만 지원</div>
        <p>S3 정적 웹사이트 호스팅은 <strong>HTTP</strong>만 제공합니다. HTTPS는 지원하지 않습니다. HTTPS가 필요하면 <strong>CloudFront</strong>(다음 챕터)를 앞에 두면 됩니다.</p>
      </div>

      <h3>React SPA와 S3</h3>
      <p>React는 <strong>SPA(Single Page Application)</strong>입니다. 모든 URL 요청이 <code>index.html</code>로 전달되어야 합니다. S3 정적 호스팅에서는 <strong>오류 문서(Error document)</strong>도 <code>index.html</code>로 설정하여 이를 처리합니다.</p>

      <div class="info-box analogy">
        <div class="info-box-title">비유로 이해하기: React SPA 라우팅</div>
        <p>일반 웹사이트는 각 페이지가 별도 HTML 파일입니다 (about.html, contact.html). 하지만 React SPA는 <strong>입구가 하나</strong>(index.html)인 건물과 같습니다. 어떤 방(페이지)으로 가든 먼저 입구(index.html)를 거쳐야 하고, 입구에서 안내(React Router)가 적절한 방으로 보내줍니다.</p>
      </div>
    </section>

    <!-- Section 3: 버킷 정책 -->
    <section class="content-section" id="bucket-policy">
      <h2>버킷 정책 (퍼블릭 읽기)</h2>

      <p>S3 정적 웹사이트 호스팅을 위해서는 버킷의 파일을 <strong>누구나 읽을 수 있도록</strong>(퍼블릭 읽기) 설정해야 합니다.</p>

      <h3>필요한 설정 2가지</h3>
      <ol>
        <li><strong>퍼블릭 접근 차단 해제</strong>: 버킷의 "Block public access" 설정을 일부 해제</li>
        <li><strong>버킷 정책 추가</strong>: 모든 사용자에게 GetObject(읽기) 권한 부여</li>
      </ol>

      <div class="code-block">
        <div class="code-header"><span class="lang">json</span><button class="copy-btn">복사</button></div>
        <pre><code>{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "PublicReadGetObject",
      "Effect": "Allow",
      "Principal": "*",
      "Action": "s3:GetObject",
      "Resource": "arn:aws:s3:::shopeasy-frontend-hong/*"
    }
  ]
}</code></pre>
      </div>

      <div class="info-box analogy">
        <div class="info-box-title">비유로 이해하기</div>
        <p>이 버킷 정책은 도서관의 <strong>"열람 자유"</strong> 정책과 같습니다. "누구나(Principal: *) 이 도서관의 책(Resource: 버킷의 모든 파일)을 읽을 수(Action: GetObject) 있다"고 선언하는 것입니다. 다만 읽기만 가능하고, 책을 수정하거나 새로 넣는 것은 관리자(IAM 사용자)만 가능합니다.</p>
      </div>

      <div class="info-box danger">
        <div class="info-box-title">퍼블릭 버킷 주의사항</div>
        <p>이 버킷은 프론트엔드 정적 파일만 저장합니다. <strong>절대로</strong> API 키, 비밀번호, 개인정보 등이 포함된 파일을 이 버킷에 올리지 마세요. 누구나 읽을 수 있습니다!</p>
      </div>
    </section>

    <!-- Lab Section -->
    <section class="content-section" id="lab">
      <h2>실습</h2>

      <div class="lab-section">
        <div class="lab-title">실습: ShopEasy 프론트엔드를 S3에 배포하기</div>

        <div class="info-box danger">
          <div class="info-box-title">비용 안내</div>
          <p>S3 정적 호스팅은 매우 저렴합니다. 프리티어에서 5GB 스토리지, 20,000 GET 요청이 무료이며, 초과해도 월 몇 센트 수준입니다.</p>
        </div>

        <ol class="steps">
          <!-- Step 1 -->
          <li class="step">
            <div class="step-title">프론트엔드용 S3 버킷 생성</div>
            <p><strong>AWS 콘솔 &rarr; S3 &rarr; Create bucket</strong></p>

            <h4>General configuration</h4>
            <ul>
              <li><strong>Bucket name</strong>: <code>shopeasy-frontend-[본인이름]</code>
                <br>예: <code>shopeasy-frontend-hong</code></li>
              <li><strong>AWS Region</strong>: <code>ap-northeast-2</code></li>
            </ul>

            <h4>Object Ownership</h4>
            <ul>
              <li><strong>ACLs disabled</strong> (기본값)</li>
            </ul>

            <h4>Block Public Access settings</h4>
            <ul>
              <li><strong>Block all public access</strong>: <strong>체크 해제</strong> (퍼블릭 접근 허용)</li>
              <li>경고 메시지가 나타나면 "I acknowledge..." 체크</li>
            </ul>

            <div class="info-box warning">
              <div class="info-box-title">이번에는 퍼블릭 접근을 허용합니다!</div>
              <p>Chapter 17의 리뷰 사진 버킷과 달리, 프론트엔드 버킷은 웹사이트로 사용하므로 퍼블릭 읽기를 허용해야 합니다. 이 버킷에는 공개해도 되는 HTML/CSS/JS 파일만 넣습니다.</p>
            </div>

            <p><strong>Create bucket</strong> 클릭</p>
            <div class="screenshot-placeholder">[스크린샷: 프론트엔드 S3 버킷 생성 - 퍼블릭 접근 차단 해제]</div>
          </li>

          <!-- Step 2 -->
          <li class="step">
            <div class="step-title">정적 웹사이트 호스팅 활성화</div>
            <p><strong>S3 &rarr; shopeasy-frontend-hong &rarr; Properties 탭</strong></p>
            <p>맨 아래 <strong>Static website hosting</strong> 섹션에서 <strong>Edit</strong> 클릭</p>
            <ul>
              <li><strong>Static website hosting</strong>: <code>Enable</code></li>
              <li><strong>Hosting type</strong>: <code>Host a static website</code></li>
              <li><strong>Index document</strong>: <code>index.html</code></li>
              <li><strong>Error document</strong>: <code>index.html</code> (React SPA 라우팅을 위해!)</li>
            </ul>
            <p><strong>Save changes</strong> 클릭</p>

            <div class="info-box concept">
              <div class="info-box-title">Error document를 index.html로 설정하는 이유</div>
              <p>React SPA에서 <code>/products/3</code> 같은 URL로 직접 접속하면, S3는 <code>products/3</code>이라는 파일을 찾습니다. 당연히 없으므로 404 에러가 발생합니다. Error document를 <code>index.html</code>로 설정하면, 404 시 <code>index.html</code>을 반환하고, React Router가 URL을 파싱하여 적절한 페이지를 렌더링합니다.</p>
            </div>

            <p>설정 저장 후, 웹사이트 URL을 확인합니다:</p>
            <p><strong>Properties &rarr; Static website hosting</strong> 섹션의 <strong>Bucket website endpoint</strong>를 메모합니다.</p>
            <div class="code-block">
              <div class="code-header"><span class="lang">text</span><button class="copy-btn">복사</button></div>
              <pre><code>http://shopeasy-frontend-hong.s3-website.ap-northeast-2.amazonaws.com</code></pre>
            </div>
            <div class="screenshot-placeholder">[스크린샷: 정적 웹사이트 호스팅 설정 및 엔드포인트]</div>
          </li>

          <!-- Step 3 -->
          <li class="step">
            <div class="step-title">버킷 정책 설정 (퍼블릭 읽기)</div>
            <p><strong>S3 &rarr; shopeasy-frontend-hong &rarr; Permissions 탭 &rarr; Bucket policy &rarr; Edit</strong></p>
            <div class="code-block">
              <div class="code-header"><span class="lang">json</span><button class="copy-btn">복사</button></div>
              <pre><code>{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "PublicReadGetObject",
      "Effect": "Allow",
      "Principal": "*",
      "Action": "s3:GetObject",
      "Resource": "arn:aws:s3:::shopeasy-frontend-hong/*"
    }
  ]
}</code></pre>
            </div>

            <div class="info-box warning">
              <div class="info-box-title">버킷 이름을 정확히 입력하세요!</div>
              <p>Resource의 <code>shopeasy-frontend-hong</code>을 본인이 생성한 버킷 이름으로 변경하세요. 버킷 이름이 다르면 정책이 적용되지 않습니다.</p>
            </div>

            <p><strong>Save changes</strong> 클릭</p>
            <p>Permissions 탭에서 버킷이 "Publicly accessible"으로 표시되는 것을 확인합니다.</p>
            <div class="screenshot-placeholder">[스크린샷: 버킷 정책 설정 - Publicly accessible]</div>
          </li>

          <!-- Step 4 -->
          <li class="step">
            <div class="step-title">React 프론트엔드 빌드</div>
            <p>프론트엔드를 빌드할 때 API URL을 ALB 주소로 설정해야 합니다.</p>
            <p>로컬 컴퓨터 또는 프론트엔드 EC2에서 빌드합니다:</p>
            <div class="code-block">
              <div class="code-header"><span class="lang">bash</span><button class="copy-btn">복사</button></div>
              <pre><code># 프로젝트 디렉토리로 이동
cd ecommerce-app/frontend

# .env 파일에 API URL 설정
echo "VITE_API_URL=http://alb-shopeasy-xxxxx.ap-northeast-2.elb.amazonaws.com" > .env

# 의존성 설치 (처음이라면)
npm install

# 프로덕션 빌드
npm run build</code></pre>
            </div>

            <p>빌드가 완료되면 <code>dist/</code> 폴더에 파일이 생성됩니다:</p>
            <div class="code-block">
              <div class="code-header"><span class="lang">bash</span><button class="copy-btn">복사</button></div>
              <pre><code># 빌드 결과 확인
ls -la dist/

# 예상 결과:
# index.html
# assets/
#   index-xxxx.js
#   index-xxxx.css
#   ...</code></pre>
            </div>

            <div class="info-box concept">
              <div class="info-box-title">VITE_API_URL 환경변수</div>
              <p>React 앱은 빌드 시점에 환경변수가 코드에 포함됩니다(런타임이 아님). 따라서 <code>VITE_API_URL</code>을 ALB 주소로 설정한 후 빌드해야 합니다. 빌드된 JS 파일 안에 이 URL이 하드코딩됩니다.</p>
            </div>

            <div class="info-box warning">
              <div class="info-box-title">ALB 주소를 정확히 입력하세요!</div>
              <p><code>VITE_API_URL</code>에 ALB DNS 이름을 정확히 입력합니다. 끝에 슬래시(/)를 넣지 마세요. 잘못 입력하면 빌드 후 API 호출이 실패합니다.</p>
            </div>
          </li>

          <!-- Step 5 -->
          <li class="step">
            <div class="step-title">빌드 파일을 S3에 업로드</div>
            <p><code>aws s3 sync</code> 명령어로 빌드 파일을 S3 버킷에 업로드합니다.</p>
            <div class="code-block">
              <div class="code-header"><span class="lang">bash</span><button class="copy-btn">복사</button></div>
              <pre><code># dist 폴더를 S3 버킷에 동기화
aws s3 sync dist/ s3://shopeasy-frontend-hong/ --delete

# --delete 옵션: S3에는 있지만 dist에 없는 파일 삭제 (깔끔한 동기화)</code></pre>
            </div>

            <p>업로드 결과를 확인합니다:</p>
            <div class="code-block">
              <div class="code-header"><span class="lang">bash</span><button class="copy-btn">복사</button></div>
              <pre><code># 업로드된 파일 목록 확인
aws s3 ls s3://shopeasy-frontend-hong/ --recursive

# 예상 결과:
# 2024-01-20 10:30:00     1234 index.html
# 2024-01-20 10:30:00   145678 assets/index-abc123.js
# 2024-01-20 10:30:00    23456 assets/index-def456.css</code></pre>
            </div>

            <div class="info-box analogy">
              <div class="info-box-title">비유로 이해하기: aws s3 sync</div>
              <p><code>aws s3 sync</code>는 <strong>폴더 미러링</strong>과 같습니다. 로컬의 dist 폴더와 S3 버킷을 비교해서, 새로 추가된 파일은 업로드하고, 수정된 파일은 덮어쓰고, 삭제된 파일은 S3에서도 삭제합니다. 마치 두 폴더를 거울처럼 동일하게 맞추는 것이죠.</p>
            </div>

            <div class="screenshot-placeholder">[스크린샷: aws s3 sync 실행 결과]</div>
          </li>

          <!-- Step 6 -->
          <li class="step">
            <div class="step-title">S3 웹사이트 URL로 접속 확인</div>
            <p>브라우저에서 S3 웹사이트 엔드포인트로 접속합니다.</p>
            <div class="code-block">
              <div class="code-header"><span class="lang">text</span><button class="copy-btn">복사</button></div>
              <pre><code>http://shopeasy-frontend-hong.s3-website.ap-northeast-2.amazonaws.com</code></pre>
            </div>

            <h4>확인 사항</h4>
            <ul>
              <li>ShopEasy 메인 페이지가 정상적으로 로드됨</li>
              <li>상품 목록이 표시됨 (ALB를 통해 API 서버에서 데이터 가져옴)</li>
              <li>상품 상세 페이지로 이동 가능</li>
              <li>리뷰 조회 및 작성 가능</li>
              <li>리뷰 사진 업로드 가능 (S3에 저장)</li>
            </ul>
            <div class="screenshot-placeholder">[스크린샷: S3 웹사이트 URL로 ShopEasy 접속 - 상품 목록]</div>

            <div class="info-box tip">
              <div class="info-box-title">성공!</div>
              <p>S3에서 서비스되는 프론트엔드에서 ALB를 통해 API 서버에 접근하고, RDS와 DynamoDB에서 데이터를 가져오고, S3에 사진을 업로드하는 전체 흐름이 동작합니다.</p>
            </div>
          </li>

          <!-- Step 7 -->
          <li class="step">
            <div class="step-title">CORS 문제 해결 (발생 시)</div>
            <p>브라우저 개발자 도구(F12)의 Console 탭에서 CORS 에러가 발생하면, ALB에서 CORS 헤더를 허용해야 합니다.</p>

            <div class="info-box warning">
              <div class="info-box-title">CORS 에러란?</div>
              <p>브라우저는 보안 상 이유로, <code>http://shopeasy-frontend-hong.s3-website...</code>(S3 도메인)에서 <code>http://alb-shopeasy-xxx.elb.amazonaws.com</code>(ALB 도메인)으로 API 요청을 보내면 차단합니다. 이를 해결하려면 API 서버에서 CORS를 허용해야 합니다.</p>
            </div>

            <p>API 서버에서 CORS가 이미 설정되어 있는지 확인합니다. ShopEasy API 서버는 <code>cors</code> 미들웨어를 사용하고 있어야 합니다:</p>
            <div class="code-block">
              <div class="code-header"><span class="lang">bash</span><button class="copy-btn">복사</button></div>
              <pre><code># API 서버 EC2에서 확인
cd ~/ecommerce-app/api-server

# cors 패키지가 설치되어 있는지 확인
npm list cors

# 없다면 설치
npm install cors</code></pre>
            </div>

            <p>API 서버의 CORS 설정이 S3 도메인을 허용하는지 확인합니다. 환경변수로 설정할 수 있습니다:</p>
            <div class="code-block">
              <div class="code-header"><span class="lang">bash</span><button class="copy-btn">복사</button></div>
              <pre><code># .env에 CORS 허용 도메인 추가
cat >> ~/ecommerce-app/api-server/.env &lt;&lt;'EOF'

# CORS 설정
CORS_ORIGIN=http://shopeasy-frontend-hong.s3-website.ap-northeast-2.amazonaws.com
EOF

# API 서버 재시작
pm2 restart shopeasy-api</code></pre>
            </div>

            <div class="info-box tip">
              <div class="info-box-title">CORS_ORIGIN을 *로 설정하면?</div>
              <p>학습 환경에서는 <code>CORS_ORIGIN=*</code>로 모든 도메인을 허용할 수 있습니다. 하지만 실무에서는 반드시 특정 도메인만 허용하세요.</p>
            </div>
          </li>

          <!-- Step 8 -->
          <li class="step">
            <div class="step-title">프론트엔드 EC2 정리 (선택)</div>
            <p>이제 프론트엔드가 S3에서 서비스되므로, 프론트엔드 EC2는 더 이상 필요하지 않습니다.</p>

            <div class="info-box warning">
              <div class="info-box-title">아직 EC2를 삭제하지 마세요!</div>
              <p>프론트엔드 EC2는 Bastion Host(프라이빗 서브넷 접근용)로도 사용하고 있습니다. Bastion Host가 더 이상 필요 없을 때까지 유지하거나, 별도의 Bastion Host를 구성한 후 삭제하세요.</p>
            </div>

            <p>프론트엔드 EC2를 중지하여 비용을 절약할 수 있습니다 (삭제가 아닌 중지):</p>
            <div class="code-block">
              <div class="code-header"><span class="lang">bash</span><button class="copy-btn">복사</button></div>
              <pre><code># AWS 콘솔에서:
# EC2 > Instances > ShopEasy-Frontend > Instance state > Stop instance

# 또는 AWS CLI로:
aws ec2 stop-instances --instance-ids i-xxxxxxxxxxxxxxxxx</code></pre>
            </div>
          </li>

          <!-- Step 9 -->
          <li class="step">
            <div class="step-title">배포 프로세스 정리</div>
            <p>앞으로 프론트엔드를 업데이트할 때는 다음 3단계만 하면 됩니다:</p>
            <div class="code-block">
              <div class="code-header"><span class="lang">bash</span><button class="copy-btn">복사</button></div>
              <pre><code># 1. 코드 수정 후 빌드
cd ecommerce-app/frontend
npm run build

# 2. S3에 업로드
aws s3 sync dist/ s3://shopeasy-frontend-hong/ --delete

# 3. (선택) CloudFront 캐시 무효화 - 다음 챕터에서 배움
# aws cloudfront create-invalidation --distribution-id XXXXX --paths "/*"</code></pre>
            </div>

            <div class="info-box analogy">
              <div class="info-box-title">비유로 이해하기: 배포의 혁신</div>
              <p>예전에는 프론트엔드를 배포하려면: SSH 접속 &rarr; git pull &rarr; npm install &rarr; npm run build &rarr; sudo cp &rarr; nginx restart... 여러 단계를 거쳤습니다. 이제는 <strong>딱 한 줄</strong>: <code>aws s3 sync</code>이면 끝입니다! 마치 이사를 할 때 짐을 하나씩 나르던 것에서, 이사 트럭 한 대로 한 번에 옮기는 것으로 바뀐 것과 같죠.</p>
            </div>
          </li>
        </ol>
      </div>

      <div class="info-box concept">
        <div class="info-box-title">이번 챕터에서 달성한 것</div>
        <ul>
          <li>S3 버킷을 생성하고 정적 웹사이트 호스팅 활성화</li>
          <li>버킷 정책으로 퍼블릭 읽기 설정</li>
          <li>React 프론트엔드를 빌드하여 S3에 배포</li>
          <li>S3 웹사이트 URL로 ShopEasy 쇼핑몰 접속 확인</li>
          <li>프론트엔드 EC2 없이 서비스 운영 가능</li>
        </ul>
      </div>

      <div class="diagram">
        <div class="diagram-title">최종 아키텍처 - Chapter 18 완료</div>
        <div class="diagram-row">
          <div class="diagram-box user"><div class="box-title">사용자 브라우저</div></div>
        </div>
        <div class="diagram-arrow down">↓</div>
        <div class="diagram-row">
          <div class="diagram-col" style="flex:1; align-items:center;">
            <div style="text-align:center; font-weight:600; padding:0.3rem; font-size:0.85rem;">정적 파일 요청</div>
            <div class="diagram-arrow down">↓</div>
            <div class="diagram-box storage"><div class="box-title">S3 정적 웹사이트</div><div class="box-sub">프론트엔드<br>HTML/CSS/JS</div></div>
          </div>
          <div class="diagram-col" style="flex:1; align-items:center;">
            <div style="text-align:center; font-weight:600; padding:0.3rem; font-size:0.85rem;">API 요청</div>
            <div class="diagram-arrow down">↓</div>
            <div class="diagram-box network"><div class="box-title">ALB</div></div>
            <div class="diagram-arrow down">↓</div>
            <div class="diagram-box compute"><div class="box-title">API 서버 EC2</div><div class="box-sub">Auto Scaling</div></div>
            <div class="diagram-arrow down">↓</div>
            <div class="diagram-row">
              <div class="diagram-box database"><div class="box-title">RDS MySQL</div><div class="box-sub">상품, 주문</div></div>
              <div class="diagram-box database"><div class="box-title">DynamoDB</div><div class="box-sub">리뷰</div></div>
            </div>
          </div>
          <div class="diagram-col" style="flex:1; align-items:center;">
            <div style="text-align:center; font-weight:600; padding:0.3rem; font-size:0.85rem;">사진 업로드</div>
            <div class="diagram-arrow down">↓</div>
            <div class="diagram-box storage"><div class="box-title">S3 버킷</div><div class="box-sub">리뷰 사진<br>(Pre-signed URL)</div></div>
          </div>
        </div>
      </div>

      <div class="info-box tip">
        <div class="info-box-title">다음 챕터 미리보기</div>
        <p>Chapter 19에서는 <strong>CloudFront</strong>를 배웁니다. CloudFront를 S3 앞에 두면 HTTPS 지원, 전 세계 CDN 캐싱, 더 빠른 로딩 속도를 얻을 수 있습니다. S3 정적 호스팅의 완성판이라고 할 수 있습니다!</p>
      </div>
    </section>

    <div class="chapter-nav">
      <a href="17-s3-review-photos.html" class="prev">이전: S3 & 리뷰 사진 업로드</a>
      <a href="19-cloudfront.html" class="next">다음: CloudFront</a>
    </div>
  </main>
</div>

<script src="../assets/js/main.js"></script>
</body>

</html>
